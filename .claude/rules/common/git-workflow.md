# Git運用ルール

プロジェクト共通のGit運用原則。プロジェクト固有のscope等は `docs/development-guidelines.md` を参照。

## ブランチ戦略

| ブランチ | 用途 | マージ先 |
|:---|:---|:---|
| `main` | 本番環境にデプロイ可能な状態 | - |
| `develop` | 開発の最新状態 | `main` |
| `feature/[機能名]` | 新機能開発 | `develop` |
| `fix/[修正内容]` | バグ修正 | `develop` |
| `hotfix/[修正内容]` | 本番の緊急修正 | `main` + `develop` |

## コミットメッセージ

**フォーマット**: Conventional Commits

```text
<type>(<scope>): <subject>

<body>
```

**type**:

| type | 用途 |
|:---|:---|
| `feat` | 新機能 |
| `fix` | バグ修正 |
| `refactor` | リファクタリング |
| `test` | テスト追加・修正 |
| `docs` | ドキュメント |
| `chore` | ビルド、設定等 |
| `style` | コードフォーマット |

**subject**: 命令形で簡潔に。句点なし。

## プルリクエスト

### 作成前チェック

- Lint + Format チェック
- 型チェック
- ユニットテスト

### レビュープロセス

1. 作成者がセルフレビュー
2. CI自動テスト実行
3. レビュアーアサイン
4. フィードバック対応
5. 承認後、Squash merge

## コードレビュー基準

### レビューポイント

- **機能性**: 要件を満たすか、エッジケース考慮、エラーハンドリング
- **可読性**: 命名規則、関数サイズ、ネストの深さ
- **保守性**: レイヤー依存関係、モジュール間依存、ファイルサイズ
- **パフォーマンス**: 不要な再レンダリング、N+1クエリ、クライアント処理量
- **セキュリティ**: 入力バリデーション、認可チェック、機密情報
- **アクセシビリティ**: aria属性、タッチターゲット、カラーコントラスト

### レビューコメントの優先度ラベル

| ラベル | 意味 | 対応 |
|:---|:---|:---|
| `[必須]` | マージ前に修正必須 | セキュリティ、バグ、データ整合性 |
| `[推奨]` | 修正を推奨 | 可読性、パフォーマンス改善 |
| `[提案]` | 検討してほしい | 設計改善、代替案 |
| `[質問]` | 理解のための質問 | 意図の確認 |
