# 開発ガイドライン (Development Guidelines)

## コード品質の原則

### 1. 可読性優先

- コードは書くよりも読まれることが多い
- 明確な変数名と関数名
- コメントよりも自己文書化コードを優先
- 一貫したフォーマット

### 2. KISS (Keep It Simple, Stupid)

- 機能する最もシンプルなソリューションを採用
- 過剰設計を避ける
- 早すぎる最適化を避ける
- 理解しやすさ > 巧妙なコード

### 3. DRY (Don't Repeat Yourself)

- 共通ロジックを関数に抽出
- 再利用可能なコンポーネントを作成
- ユーティリティ関数をモジュール間で共有
- コピー&ペーストプログラミングを避ける

### 4. YAGNI (You Aren't Gonna Need It)

- 必要ない機能を事前に構築しない
- 推測的な一般化を避ける
- 必要なときのみ複雑さを追加
- シンプルに始めて、必要に応じてリファクタリング

## コーディング規約

### 命名規則

#### 変数・関数

<!-- ルールを定義 -->
<!-- コード例を記載 -->

### コードフォーマット

**インデント**: [2スペース/4スペース/タブ]

**行の長さ**: 最大[80/100/120]文字

**例**:

```typescript
// [言語] コードフォーマット例
[コード例]
```

### コメント規約

<!-- ルールを定義 -->
<!-- コード例を記載 -->

### エラーハンドリング

**原則**:

- 予期されるエラー: 適切なエラークラスを定義
- 予期しないエラー: 上位に伝播
- エラーを無視しない

<!-- コード例を記載 -->

## Git運用ルール

### ブランチ戦略

**ブランチ種別**:

- `main`: 本番環境にデプロイ可能な状態
- `develop`: 開発の最新状態
- `feature/[機能名]`: 新機能開発
- `fix/[修正内容]`: バグ修正

**フロー**:

```bash
main
  └─ develop
      ├─ feature/task-management
      ├─ feature/user-auth
      └─ fix/task-validation
```

### コミットメッセージ規約

**フォーマット**:

```text
<type>(<scope>): <subject>

<body>

<footer>
```

**Type**:

- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメント
- `style`: コードフォーマット
- `test`: テスト追加・修正
- `chore`: ビルド、補助ツール等

### プルリクエストプロセス

**作成前のチェック**:

- [ ] 全てのテストがパス
- [ ] Lintエラーがない
- [ ] 型チェックがパス
- [ ] 競合が解決されている

**PRテンプレート**:

```markdown
## 概要
[変更内容の簡潔な説明]

## 変更理由
[なぜこの変更が必要か]

## 変更内容
- [変更点1]
- [変更点2]

## テスト
- [ ] ユニットテスト追加
- [ ] 手動テスト実施

## スクリーンショット(該当する場合)
[画像]

## 関連Issue
Closes #[Issue番号]
```

**レビュープロセス**:

1. セルフレビュー
2. 自動テスト実行
3. レビュアーアサイン
4. レビューフィードバック対応
5. 承認後マージ

## テスト戦略

### テストの種類

#### ユニットテスト

**対象**: 個別の関数・クラス

**カバレッジ目標**: [80/90/100]%

**例**:

<!-- コード例を記述する -->

#### 統合テスト

**対象**: 複数コンポーネントの連携

<!-- コード例を記述する -->

#### E2Eテスト

**対象**: ユーザーシナリオ全体

<!-- コード例を記述する -->

### テスト命名規則

**パターン**: `[対象]_[条件]_[期待結果]`

<!-- コード例を記述する -->

### モック・スタブの使用

**原則**:

- 外部依存(API、DB、ファイルシステム)はモック化
- ビジネスロジックは実装を使用

<!-- コード例を記述する -->

## コードレビュー基準

### レビューポイント

**機能性**:

- [ ] 要件を満たしているか
- [ ] エッジケースが考慮されているか
- [ ] エラーハンドリングが適切か

**可読性**:

- [ ] 命名が明確か
- [ ] コメントが適切か
- [ ] 複雑なロジックが説明されているか

**保守性**:

- [ ] 重複コードがないか
- [ ] 責務が明確に分離されているか
- [ ] 変更の影響範囲が限定的か

**パフォーマンス**:

- [ ] 不要な計算がないか
- [ ] メモリリークの可能性がないか
- [ ] データベースクエリが最適化されているか

**セキュリティ**:

- [ ] 入力検証が適切か
- [ ] 機密情報がハードコードされていないか
- [ ] 権限チェックが実装されているか

### レビューコメントの書き方

**建設的なフィードバック**:
```markdown
## ✅ 良い例
この実装だと、タスク数が増えた時にパフォーマンスが劣化する可能性があります。
代わりに、インデックスを使った検索を検討してはどうでしょうか？

## ❌ 悪い例
この書き方は良くないです。
```

**優先度の明示**:

- `[必須]`: 修正必須
- `[推奨]`: 修正推奨
- `[提案]`: 検討してほしい
- `[質問]`: 理解のための質問

### 推奨開発ツール(該当する場合)

- [ツール1]: [説明]
- [ツール2]: [説明]
